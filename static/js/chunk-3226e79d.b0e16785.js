(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3226e79d"],{1:function(t,e){},2:function(t,e){},"2eb5":function(t,e,i){},3:function(t,e){},4:function(t,e){},"4ae2":function(t,e,i){"use strict";var a=i("2eb5"),n=i.n(a);n.a},"90fe":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container",staticStyle:{"margin-bottom":"20px"}},[i("el-button",{staticClass:"margin-right filter-item",attrs:{type:"danger"}},[t._v("\n        一键删除\n      ")]),t._v(" "),i("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-search",type:"primary"}},[t._v("\n        搜索\n      ")]),t._v(" "),i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{icon:"el-icon-edit",type:"primary"},on:{click:t.handleCreate}},[t._v("\n        新增\n      ")]),t._v(" "),i("div",{staticClass:"exp-right",staticStyle:{float:"right"}},[i("el-button",{staticClass:"filter-item",attrs:{loading:t.downloadLoading,icon:"el-icon-download",size:"middle",type:"primary"}},[t._v("\n          导出excel\n      ")])],1)],1),t._v(" "),i("div",{staticClass:"tables-wrap"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"序号",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.$index)+"\n        ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"微信号"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.wx_user))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"微信号图片",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("span",[i("img",{attrs:{width:"70px",height:"70px",src:t.row.wx_img,alt:""}})])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"描述","min-width":"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.pageviews?e.row.pageviews:"--")+"\n        ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"访问次数","min-width":"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.visitTime)+"\n        ")]}}])}),t._v(" "),i("el-table-column",{attrs:{"class-name":"status-col",label:"状态","min-width":"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tag",{attrs:{type:t._f("statusFilter")(e.row.status)}},[t._v(t._s(1==e.row.status?"正常":"被封"))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",prop:"created_at",label:"更新时间",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("i",{staticClass:"el-icon-time"}),t._v(" "),i("span",[t._v(t._s(e.row.display_time))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",prop:"created_at",label:"操作",width:"350"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("el-button",{staticClass:"btn-edit",attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.handleUpdate(a)}}},[t._v("\n            编辑\n          ")]),t._v(" "),i("el-button",{staticClass:"btn-edit",attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(a)}}},[t._v("\n            删除\n          ")]),t._v(" "),a.saleId?t._e():i("el-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"primary"},on:{click:function(e){return t.onclick_makeUrl(a)}}},[t._v("\n            生成推广链接(未生成)\n          ")]),t._v(" "),a.saleId?i("el-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"primary"},on:{click:function(e){return t.onclick_lookUrl(a)}}},[t._v("\n            查看推广链接(已生成)\n          ")]):t._e()]}}])})],1)],1),t._v(" "),i("div"),t._v(" "),i("el-dialog",{staticClass:"eidtpop",attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{model:t.temp,rules:t.rules,"label-position":"left","label-width":"120px"}},[i("el-form-item",{attrs:{label:"微信号",prop:"name"}},[i("el-input",{model:{value:t.temp.wx_user,callback:function(e){t.$set(t.temp,"wx_user",e)},expression:"temp.wx_user"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"微信图片",prop:"name"}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://47.100.37.157:8002/user/upLoadImg","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.temp.wx_img,expression:"temp.wx_img"}],staticClass:"avatar",attrs:{src:t.temp.wx_img,alt:""}}),t._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:!t.temp.wx_img,expression:"!temp.wx_img"}],staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),i("el-form-item",{attrs:{label:"测试",prop:"phylum"}},[i("el-input",{model:{value:t.temp.phylum_cn,callback:function(e){t.$set(t.temp,"phylum_cn",e)},expression:"temp.phylum_cn"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("\n          取消\n        ")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.createData():t.updateData()}}},[t._v("\n          确认\n        ")])],1)],1),t._v(" "),i("div",{staticClass:"download"},[i("el-dialog",{attrs:{"before-close":t.onClick_close,visible:t.isShowDown,center:"",title:"选择推广页模板"},on:{"update:visible":function(e){t.isShowDown=e}}},[i("div",{staticClass:"opt-wrap",staticStyle:{display:"flex","justify-content":"space-around"}},[i("div",{staticClass:"opt1",on:{click:t.onClick_Make}},[t._v("\n           默认男科\n          ")]),t._v(" "),i("div",{staticClass:"opt1",on:{click:t.onClick_Make1}},[t._v("\n            默认痔疮\n          ")]),t._v(" "),i("div",{staticClass:"opt1"},[t._v("\n            默认模板\n\n          ")])])]),t._v("y\n      \n      "),i("el-dialog",{attrs:{"before-close":t.onClick_close,visible:t.isShowexp,center:"",height:"500px",title:"",width:"1000px"},on:{"update:visible":function(e){t.isShowexp=e}}})],1),t._v(" "),i("div",{staticClass:"download"},[i("el-dialog",{attrs:{"close-on-click-modal":t.clickmodal,"before-close":t.onClick_closeSale,visible:t.isShowSale,center:"",title:"推广链接"},on:{"update:visible":function(e){t.isShowSale=e}}},[t._l(t.saleList,(function(t){return i("div",{staticStyle:{"margin-bottom":"15px"}},[i("el-alert",{attrs:{title:t.url,type:"success",closable:!1}})],1)})),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.onclick_makeUrl}},[t._v("\n          重新生成\n        ")])],2),t._v(" "),i("el-dialog",{attrs:{"before-close":t.onClick_close,visible:t.isShowexp,center:"",height:"500px",title:"",width:"1000px"},on:{"update:visible":function(e){t.isShowexp=e}}})],1),t._v(" "),i("delete-pop",{attrs:{isShowDeletePop:t.isShowDeletePop,value:t.isShowDeletePop},on:{update:t.deleteItem}})],1)},n=[],l=(i("4b5e"),i("6c28"),i("4634"),i("b775"));function s(t){return Object(l["a"])({url:"/user/getUser",method:"get",params:t})}function o(t){return Object(l["a"])({url:"/user/update",method:"get",params:t})}function r(t){return Object(l["a"])({url:"/user/register",method:"get",params:t})}function c(t){return Object(l["a"])({url:"/user/delUser",method:"get",params:t})}function u(t){return Object(l["a"])({url:"/user/makeSale",method:"get",params:t})}var d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{title:"系统提示",visible:t.isShowDeletePop,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.isShowDeletePop=e}}},[i("span",[t._v("此操作删除后不可恢复，是否确认删除？")]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.onClick_cancelBtn}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.onClick_sureBtn}},[t._v("确 定")])],1)])},p=[],h=(i("8f42"),{created:function(){},data:function(){return{isShowDeletePop:!1,dialogVisible:!1}},props:{value:{type:Boolean,default:!1},deleteId:{type:[Number,String]}},watch:{value:function(t){this.isShowDeletePop=this.value},isShowDeletePop:function(t){this.$emit("input",t)}},components:{},methods:{handleClose:function(){this.onClick_cancelBtn()},onClick_cancelBtn:function(){this.isShowDeletePop=!1,this.$message({type:"info",message:"已取消删除"}),this.$emit("update",!1)},onClick_sureBtn:function(){this.isShowDeletePop=!1,this.$emit("update",!0),this.$message({type:"success",message:"删除成功!"})}}}),f=h,m=(i("4ae2"),i("6691")),v=Object(m["a"])(f,d,p,!1,null,"66b0ee6c",null),w=v.exports,g=i("7b04"),_=i.n(g),b={filters:{statusFilter:function(t){var e={published:"success",draft:"gray",deleted:"danger"};return e[t]}},components:{deletePop:w},data:function(){return{list:null,listLoading:!0,drawer:!1,direction:"rtl",downloadLoading:!1,textMap:{update:"编辑",create:"新增"},temp:{wx_img:"",wx_user:""},rules:{type:[{required:!0,message:"type is required",trigger:"change"}],timestamp:[{type:"date",required:!0,message:"timestamp is required",trigger:"change"}],title:[{required:!0,message:"title is required",trigger:"blur"}]},dialogFormVisible:!1,dialogStatus:"",isShowDeletePop:!1,delId:0,imageUrl:"",isShowDown:!1,isShowexp:!1,saleUser:{},isShowSale:!1,saleList:[],clickmodal:!1,rows:{},domainList:[{url:"http://www.zhangbo1.cn"},{url:"http://www.wangyu18.cn"},{url:"http://www.typescripts.cn"},{url:"http://www.taylorfan.cn"},{url:"http://www.wyforever.cn"},{url:"http://www.nodets.cn"}],domainList2:[{url:"http://zc.zhangbo1.cn"},{url:"http://zc.wangyu18.cn"},{url:"http://zc.typescripts.cn"},{url:"http://zc.taylorfan.cn"},{url:"http://zc.wyforever.cn"},{url:"http://zc.nodets.cn"}]}},created:function(){this.getList()},methods:{handleAvatarSuccess:function(t,e){this.imageUrl=URL.createObjectURL(e.raw),this.temp.wx_img="http://47.100.37.157:8002/wx_img/"+t.data.filename},beforeAvatarUpload:function(){},onclick_makeUrl:function(t){this.isShowDown=!0,this.saleUser=t},onClick_default:function(){},handleClose:function(){this.drawer=!1},getList:function(){var t=this;this.listLoading=!0,s().then((function(e){t.list=e.data,setTimeout((function(){t.listLoading=!1}),700)}))},handleUpdate:function(t){this.temp=Object.assign({},t),this.dialogStatus="update",this.dialogFormVisible=!0},updateData:function(){var t=this,e=Object.assign({},this.temp);o(e).then((function(){var e=!0,i=!1,a=void 0;try{for(var n,l=t.list[Symbol.iterator]();!(e=(n=l.next()).done);e=!0){var s=n.value;if(s.id===t.temp.id){var o=t.list.indexOf(s);t.list.splice(o,1,t.temp);break}}}catch(r){i=!0,a=r}finally{try{e||null==l.return||l.return()}finally{if(i)throw a}}t.getList(),t.dialogFormVisible=!1,t.$notify({title:"系统提示",message:"编辑成功！",type:"success",duration:2e3})}))},handleCreate:function(){this.dialogStatus="create",this.dialogFormVisible=!0,this.temp={wx_img:"",wx_user:""}},createData:function(){var t=this;this.listLoading=!0,console.log(this.temp),r(this.temp).then((function(){t.listLoading=!1,t.getList(),t.dialogFormVisible=!1,t.$notify({title:"系统提示",message:"创建数据成功！",type:"success",duration:2e3})}))},handleDelete:function(t){this.isShowDeletePop=!0,this.delId=t.id;var e=[];e.push(this.list.indexOf(t)),this.delIndex=e},deleteItem:function(t){var e=this;if(this.isShowDeletePop=!1,t){var i={};i.id=this.delId,c(i).then((function(){e.$notify({title:"系统提示",message:"数据删除成功！",type:"success",duration:2e3}),e.getList()}),(function(t){e.$notify({title:"删除失败",message:t.msg,type:"danger",duration:2e3})}))}this.delIds=""},onClick_close:function(){this.isShowDown=!1},onClick_Make:function(){var t=this;if(this.isShowDown=!1,this.look){var e=JSON.parse(JSON.stringify(this.domainList)),i=!0,a=!1,n=void 0;try{for(var l,s=e[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var o=l.value;o.url=o.url+"/#/temp1?saleId="+this.saleUser.saleId}}catch(c){a=!0,n=c}finally{try{i||null==s.return||s.return()}finally{if(a)throw n}}return this.saleList=e,this.isShowSale=!0,void(this.look=!1)}var r=this.$loading({lock:!0,text:"努力生成中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"});setTimeout((function(){var e=_.a.createHash("md5");e.update((new Date).getTime()+"11111");var i=e.digest("hex"),a={};a.id=t.saleUser.id,a.saleId=i,u(a).then((function(e){var a=JSON.parse(JSON.stringify(t.domainList)),n=!0,l=!1,s=void 0;try{for(var o,u=a[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var d=o.value;d.url=d.url+"/#/temp1?saleId="+i}}catch(c){l=!0,s=c}finally{try{n||null==u.return||u.return()}finally{if(l)throw s}}t.isShowSale=!0,t.saleList=a,r.close()}))}),2e3)},onClick_Make1:function(){var t=this;if(this.isShowDown=!1,this.look){var e=JSON.parse(JSON.stringify(this.domainList)),i=!0,a=!1,n=void 0;try{for(var l,s=e[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var o=l.value;o.url=o.url+"/zhichuang/index.htm?saleId="+this.saleUser.saleId}}catch(c){a=!0,n=c}finally{try{i||null==s.return||s.return()}finally{if(a)throw n}}return this.saleList=e,this.isShowSale=!0,void(this.look=!1)}this.isShowDown=!1;var r=this.$loading({lock:!0,text:"努力生成中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"});setTimeout((function(){var e=_.a.createHash("md5");e.update((new Date).getTime()+"11111");var i=e.digest("hex"),a={};a.id=t.saleUser.id,a.saleId=i,u(a).then((function(e){var a=JSON.parse(JSON.stringify(t.domainList2)),n=!0,l=!1,s=void 0;try{for(var o,u=a[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var d=o.value;d.url=d.url+"/zy?saleId="+i}}catch(c){l=!0,s=c}finally{try{n||null==u.return||u.return()}finally{if(l)throw s}}t.isShowSale=!0,t.saleList=a,r.close()}))}),2e3)},onclick_lookUrl:function(t){this.saleUser=t,this.isShowDown=!0,this.look=!0},onClick_closeSale:function(){this.isShowSale=!1}}},y=b,S=(i("a221"),Object(m["a"])(y,a,n,!1,null,null,null));e["default"]=S.exports},a221:function(t,e,i){"use strict";var a=i("d3e3"),n=i.n(a);n.a},d3e3:function(t,e,i){}}]);